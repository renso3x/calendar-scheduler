(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{148:function(e,t,a){e.exports=a(217)},153:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(8),o=a.n(c),i=(a(153),a(98)),l=a(99),s=a(136),u=a(100),d=a(138),m=a(69),p=a(51),f=a(234),h=a(236),g=a(235),b=(a(158),a(160),a(31)),E=a(137),v=a(135),w=a(20),x={schedule:{records:[]}},O="FETCH_SCHEDULE",j="DELETE_INIT",y="DELETE_SUCCESS",S="CREATE_INIT",C="CREATE_SUCCESS",N="UPDATE_INIT",k="UPDATE_SUCCESS";var D=Object(b.c)({schedules:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.schedule,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(w.a)({},e,{records:[].concat(Object(v.a)(e.records),[t.payload])});case k:return Object(w.a)({},e,{records:e.records.map(function(e){return e.id===t.payload.id?t.payload:e})});case O:return Object(w.a)({},e,{records:t.payload});case y:return Object(w.a)({},e,{records:e.records.filter(function(e){return e.id!==t.payload.id})});default:return e}}}),W=a(17),I=a.n(W),T=a(26),B=a(40),P=a.n(B);P.a.interceptors.request.use(function(e){return e.headers.common.Authorization="Bearer ".concat(localStorage.getItem("token")),e},function(e){return Promise.reject(e)}),P.a.interceptors.response.use(function(e){return 500===e.data.status?(p.b.error("An unexpected error occurred."),Object.assign({},e,{status:500})):e},function(e){return console.log(e),e.response&&e.response.status>=400&&e.response.status<500||p.b.error("An unexpected error occurred."),Promise.reject(e)});var _={setJWT:function(e){P.a.defaults.headers.common.Authorization="Bearer ".concat(e)},get:P.a.get,post:P.a.post,put:P.a.put,delete:P.a.delete},U=a(104),A=a.n(U),F=function(){try{var e=localStorage.getItem("token");return A()(e)}catch(t){return null}},q=function(){localStorage.clear()},H=I.a.mark(V),L=I.a.mark(X),R=I.a.mark(K),z=I.a.mark($),M=I.a.mark(Y);function V(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.c)($);case 2:return e.next=4,Object(T.e)(j,Y);case 4:return e.next=6,Object(T.e)(S,K);case 6:return e.next=8,Object(T.e)(N,X);case 8:case"end":return e.stop()}},H)}function J(e){return _.put("/api/schedule/".concat(e.id),e)}function X(e){var t;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(T.b)(J,e.payload.data);case 3:return t=a.sent,a.next=6,Object(T.d)({type:k,payload:t.data[0]});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},L,null,[[0,8]])}function G(e){return _.post("/api/schedule/",e)}function K(e){var t;return I.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(T.b)(G,e.payload.data);case 3:return t=a.sent,a.next=6,Object(T.d)({type:C,payload:t.data});case 6:a.next=11;break;case 8:a.prev=8,a.t0=a.catch(0),console.log(a.t0);case 11:case"end":return a.stop()}},R,null,[[0,8]])}function $(){var e;return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,F()){t.next=3;break}return t.abrupt("return",null);case 3:return"/api/schedule",t.next=6,_.get("/api/schedule");case 6:return e=t.sent,t.next=9,Object(T.d)({type:O,payload:e.data});case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},z,null,[[0,11]])}function Q(e){return _.delete("/api/schedule/".concat(e.id))}function Y(e){return I.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(T.b)(Q,e.payload.data);case 3:return t.next=5,Object(T.d)({type:y,payload:{id:e.payload.data.id}});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}},M,null,[[0,7]])}var Z=I.a.mark(ee);function ee(){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)([V()]);case 2:case"end":return e.stop()}},Z)}var te=Object(E.a)(),ae=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||b.d,ne=Object(b.e)(D,ae(Object(b.a)(te)));te.run(ee);var re=ne,ce=a(139),oe=a(233),ie=function(e){e.path;var t=e.component,a=e.render,n=Object(ce.a)(e,["path","component","render"]);return r.a.createElement(g.a,Object.assign({},n,{render:function(e){return F()?t?r.a.createElement(t,e):a(e):r.a.createElement(oe.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},le=a(62),se=a(30),ue=a(29),de=a(208),me=a(212),pe=a(207),fe=a(230),he=a(214),ge=a(213),be=a(64),Ee=a.n(be),ve=a(209),we=a(205),xe=a(125),Oe=Object(xe.a)(function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}),je=function(e){var t=e.location,a=Oe(),c=Object(n.useState)({email:"",password:"",isSubmitting:!1}),o=Object(ue.a)(c,2),i=o[0],l=o[1],s=function(e){var t=e.target.value;l(Object(w.a)({},i,Object(se.a)({},e.target.name,t)))},u=function(){var e=Object(le.a)(I.a.mark(function e(a){var n,r;return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,delete i.isSubmitting,console.log(i),e.next=6,o=i,_.post("/api/auth/login",o);case 6:200===(n=e.sent).status&&(c=n.data.token,localStorage.setItem("token",c),r=t.state,window.location=r?r.from.pathname:"/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}var c,o},e,null,[[1,10]])}));return function(t){return e.apply(this,arguments)}}();return F()?r.a.createElement(oe.a,{to:"/"}):r.a.createElement(we.a,{component:"main",maxWidth:"xs"},r.a.createElement(pe.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(de.a,{className:a.avatar},r.a.createElement(Ee.a,null)),r.a.createElement(ve.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:a.form,noValidate:!0},r.a.createElement(fe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:s}),r.a.createElement(fe.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:s}),r.a.createElement(me.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:u},"Sign In"),r.a.createElement(ge.a,{container:!0},r.a.createElement(ge.a,{item:!0},r.a.createElement(he.a,{href:"/register",variant:"body2"},"Don't have an account? Sign Up"))))))},ye=a(54),Se=a.n(ye),Ce=a(127),Ne=(a(168),a(229)),ke=a(134),De=a.n(ke),We=a(215),Ie=a(221),Te=a(220),Be=a(219),Pe=Object(xe.a)(function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)}}}),_e=function(e){var t=e.modal,a=e.toggle,c=e.onSubmit,o=e.status,i=e.onUpdate,l=e.record,s=Pe(),u=Object(n.useState)({start:"",duration:"15",title:""}),d=Object(ue.a)(u,2),m=d[0],p=d[1];Object(n.useEffect)(function(){p(l)},[l]);var f=function(e){return function(t){p(Object(w.a)({},m,Object(se.a)({},e,t.target.value)))}};return r.a.createElement(We.a,{open:t,maxWidth:"md"},r.a.createElement(Be.a,null,"Schedule Details"),r.a.createElement(Te.a,null,r.a.createElement(fe.a,{margin:"normal",className:s.textField,type:"text",name:"title",placeholder:"Title",value:m.title,onChange:f("title"),fullWidth:!0}),r.a.createElement(fe.a,{margin:"normal",className:s.textField,fullWidth:!0,type:"time",name:"start",onChange:f("start")}),r.a.createElement(fe.a,{id:"standard-select-currency-native",select:!0,label:"Native select",className:s.textField,value:m.duration,onChange:f("duration"),SelectProps:{native:!0,MenuProps:{className:s.menu}},helperText:"Please select the duration",margin:"normal",fullWidth:!0},r.a.createElement("option",{value:"15"},"15"),r.a.createElement("option",{value:"30"},"30"),r.a.createElement("option",{value:"45"},"45"),r.a.createElement("option",{value:"60"},"60"))),r.a.createElement(Ie.a,null,r.a.createElement(me.a,{color:"primary",onClick:function(){return o?i(m):c(m)}},o?"Update":"Submit")," ",r.a.createElement(me.a,{color:"secondary",onClick:a},"Cancel")))},Ue=a(3),Ae=a(237),Fe=a(225),qe=a(226),He=a(211),Le=a(228),Re=a(227),ze=a(131),Me=a.n(ze),Ve=a(133),Je=a.n(Ve),Xe=a(132),Ge=a.n(Xe),Ke=Object(xe.a)(function(e){return{root:{display:"flex"},toolbar:{paddingRight:24},toolbarIcon:Object(w.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:"none"},title:{flexGrow:1},drawerPaper:{position:"relative",whiteSpace:"nowrap",width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerPaperClose:Object(se.a)({overflowX:"hidden",transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),width:e.spacing(7)},e.breakpoints.up("sm"),{width:e.spacing(9)}),appBarSpacer:e.mixins.toolbar,content:{flexGrow:1,height:"100vh",overflow:"auto"},container:{paddingTop:e.spacing(4),paddingBottom:e.spacing(4)},paper:{padding:e.spacing(2),display:"flex",overflow:"auto",flexDirection:"column"},fixedHeight:{height:240}}}),$e=a(222),Qe=a(223),Ye=a(224),Ze=a(130),et=a.n(Ze),tt=r.a.createElement("div",null,r.a.createElement($e.a,{button:!0},r.a.createElement(Qe.a,null,r.a.createElement(et.a,null)),r.a.createElement(Ye.a,{primary:"Schedule"})));function at(e){var t=e.children,a=Ke(),n=r.a.useState(!0),c=Object(ue.a)(n,2),o=c[0],i=c[1];return r.a.createElement("div",{className:a.root},r.a.createElement(pe.a,null),r.a.createElement(Fe.a,{position:"absolute",className:Object(Ue.a)(a.appBar,o&&a.appBarShift)},r.a.createElement(qe.a,{className:a.toolbar},r.a.createElement(Re.a,{edge:"start",color:"inherit","aria-label":"open drawer",onClick:function(){i(!0)},className:Object(Ue.a)(a.menuButton,o&&a.menuButtonHidden)},r.a.createElement(Me.a,null)),r.a.createElement(ve.a,{component:"h1",variant:"h6",color:"inherit",noWrap:!0,className:a.title},"My Calendar"),r.a.createElement(Re.a,{color:"inherit",onClick:function(){q(),window.location="/login"}},r.a.createElement(Ge.a,null)))),r.a.createElement(Ae.a,{variant:"permanent",classes:{paper:Object(Ue.a)(a.drawerPaper,!o&&a.drawerPaperClose)},open:o},r.a.createElement("div",{className:a.toolbarIcon},r.a.createElement(Re.a,{onClick:function(){i(!1)}},r.a.createElement(Je.a,null))),r.a.createElement(Le.a,null),r.a.createElement(He.a,null,tt)),r.a.createElement("main",{className:a.content},r.a.createElement("div",{className:a.appBarSpacer}),r.a.createElement(we.a,{maxWidth:"lg",className:a.container},r.a.createElement(ge.a,{container:!0,spacing:3},r.a.createElement(ge.a,{item:!0,xs:12},t)))))}var nt=Object(xe.a)(function(e){return{fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}),rt=Object(Ce.b)(Se.a),ct=[{path:"/login",component:je,exact:!0},{path:"/register",component:function(e){var t=e.location,a=Oe(),c=Object(n.useState)({firstName:"",lastName:"",email:"",password:"",isSubmitting:!1}),o=Object(ue.a)(c,2),i=o[0],l=o[1],s=function(e){var t=e.target.value;l(Object(w.a)({},i,Object(se.a)({},e.target.name,t)))},u=function(){var e=Object(le.a)(I.a.mark(function e(a){return I.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,delete i.isSubmitting,e.next=5,n=i,_.post("/api/user/register",n);case 5:if(200!==e.sent.status){e.next=9;break}return t.state,e.abrupt("return",r.a.createElement(oe.a,{to:"/login"}));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}var n},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}();return F()?r.a.createElement(oe.a,{to:"/"}):r.a.createElement(we.a,{component:"main",maxWidth:"xs"},r.a.createElement(pe.a,null),r.a.createElement("div",{className:a.paper},r.a.createElement(de.a,{className:a.avatar},r.a.createElement(Ee.a,null)),r.a.createElement(ve.a,{component:"h1",variant:"h5"},"Register"),r.a.createElement("form",{className:a.form,noValidate:!0},r.a.createElement(ge.a,{container:!0,spacing:2},r.a.createElement(ge.a,{item:!0,xs:12,sm:6},r.a.createElement(fe.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,onChange:s})),r.a.createElement(ge.a,{item:!0,xs:12,sm:6},r.a.createElement(fe.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",onChange:s})),r.a.createElement(ge.a,{item:!0,xs:12},r.a.createElement(fe.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",onChange:s})),r.a.createElement(ge.a,{item:!0,xs:12},r.a.createElement(fe.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:s}))),r.a.createElement(me.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:a.submit,onClick:u},"Sign Up"),r.a.createElement(ge.a,{container:!0,justify:"flex-end"},r.a.createElement(ge.a,{item:!0},r.a.createElement(he.a,{href:"/login",variant:"body2"},"Already have an account? Sign in"))))))},exact:!0},{path:"/",component:Object(m.b)(function(e){return{schedules:e.schedules.records.map(function(e){var t=function(e,t){var a=e.split(":"),n=Se()().toDate();n.setHours(a[0]),n.setMinutes(a[1]);var r=Se()(n,"H").add(t,"m");return{start:new Date(n),end:new Date(r)}}(e.start,e.duration),a=t.start,n=t.end;return Object(w.a)({},e,{start:a,end:n,allDays:!1})})}},{deleteSchedule:function(e){return{type:j,payload:{data:e}}},createSchedule:function(e){return{type:S,payload:{data:e}}},updateSchedule:function(e){return{type:N,payload:{data:e}}}})(function(e){var t=e.schedules,a=e.deleteSchedule,c=e.createSchedule,o=e.updateSchedule,i=nt(),l=Object(n.useState)(!1),s=Object(ue.a)(l,2),u=s[0],d=s[1],m=Object(n.useState)({status:"",record:{start:"",duration:"15",title:""}}),p=Object(ue.a)(m,2),f=p[0],h=p[1],g=function(){return d(!u)},b=function(){return h(Object(w.a)({},f,{status:""}))},E=function(e){a(e)};return r.a.createElement(at,null,r.a.createElement("div",{className:"calendar"},r.a.createElement(Ce.a,{events:t,views:["day"],defaultView:"day",step:5,defaultDate:new Date,onSelectEvent:function(e){window.confirm("Do you want to delete this schedule? Press OK, cancel for editting")?(E(e),b()):(h(Object(w.a)({},f,{record:e,status:"edit"})),g())},localizer:rt})),r.a.createElement(Ne.a,{color:"primary","aria-label":"add",className:i.fab,onClick:g},r.a.createElement(De.a,null)),r.a.createElement(_e,{modal:u,toggle:g,onSubmit:function(e){c(e),g(),b()},status:f.status,onUpdate:function(e){o(Object(w.a)({id:f.record.id},e)),g(),b()},record:f.record}))}),exact:!0,protected:!0}],ot=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement(m.a,{store:re},r.a.createElement(p.a,null),r.a.createElement(f.a,null,r.a.createElement(h.a,null,ct.map(function(e){var t=e.protected?ie:g.a;return r.a.createElement(t,Object.assign({key:e.path},e))}),r.a.createElement(g.a,{component:function(){return r.a.createElement("h6",null,"Not found")}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ot,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[148,2,1]]]);
//# sourceMappingURL=main.da781549.chunk.js.map